## CommonJS是一种用于在JavaScript中实现模块化的规范，它最初主要用于服务器端开发，例如Node.js。在CommonJS中，使用require关键字来引入模块，并且require函数会按照一定的规则查找和加载模块。以下是CommonJS中require查找的基本流程：

- 查找路径解析：当在一个模块中使用require语句引入另一个模块时，require会首先根据指定的模块标识（通常是一个相对或绝对路径）来进行路径解析。如果标识是一个相对路径，它会相对于当前模块所在的位置进行解析，如果是一个绝对路径，则会从根目录开始解析。

- 文件扩展补全：在解析路径的过程中，require会根据特定的文件扩展名（如.js、.json等）依次尝试查找对应的文件。如果没有指定扩展名，它会默认按照.js、.json、.node的顺序依次尝试。

- 目录查找和包装：如果在步骤2中没有找到对应的文件，require会尝试查找目录下的package.json文件，看是否存在一个main字段，指示入口文件。如果找到该入口文件，require会加载并返回它。如果没有找到package.json文件或main字段，require会尝试查找目录下的index.js或index.json文件作为默认入口。

- 向上级目录查找：如果在当前路径下找不到模块，require会依次向上级目录递归查找，直到找到模块或达到根目录。这个过程允许模块间的相对路径引用。

- 核心模块查找：如果在前面的步骤中没有找到模块，require会尝试查找是否是一个内置的核心模块（如fs、http等）。如果是，它会直接返回内置模块。

- 模块缓存：一旦找到模块并加载成功，require会将模块对象缓存起来，以便在后续的引用中直接返回缓存的模块对象，避免重复加载和解析。

需要注意的是，require函数的具体实现可能会因运行环境（例如Node.js）和项目配置而有所不同，但以上流程描述了require的基本查找和加载机制。




